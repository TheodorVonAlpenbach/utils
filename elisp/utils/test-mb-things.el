(require 'ert)
(require 'mb-things)

(ert-deftest test-inc-clock ()
  "Test of `inc-clock'"
  (should (equal (inc-clock "08:15" 1 1) "08:16"))
  (should (equal (inc-clock "08:15" 2 1) "08:17"))
  (should (equal (inc-clock "08:15" -1 1) "08:14"))
  (should (equal (inc-clock "08:15" 1 2) "09:15"))
  (should (equal (inc-clock "08:15" 2 2) "10:15"))
  (should (equal (inc-clock "08:15" -1 2) "07:15"))
  (should (equal (inc-clock "08:15" 1 3) "08:15:01"))
  (should (equal (inc-clock "08:15" 2 3) "08:15:02"))
  (should (equal (inc-clock "08:15" -1 3) "08:14:59"))
  (should (equal (inc-clock "08:15" 1 '(:hour  1)) "09:00"))
  (should (equal (inc-clock "08:15" 1 '(:hour  2)) "10:00"))
  (should (equal (inc-clock "08:15" 2 '(:hour  1)) "10:00"))
  (should (equal (inc-clock "08:15" 1 '(:hour -1)) "07:00"))
  (should (equal (inc-clock "08:15" 1 '(:minute  30)) "08:30"))
  (should (equal (inc-clock "08:15" 2 '(:minute  30)) "09:00"))
  (should (equal (inc-clock "08:15" 1 '(:minute -30)) "08:00"))
  (should (equal (inc-clock "08:15" 1 '(:minute  15)) "08:30"))
  (should (equal (inc-clock "08:15" 2 '(:minute  15)) "08:45"))
  (should (equal (inc-clock "08:15" 1 '(:minute -15)) "08:00"))
  (should (equal (inc-clock "08:15" 1 '(:minute  10)) "08:20"))
  (should (equal (inc-clock "08:15" 2 '(:minute  10)) "08:30"))
  (should (equal (inc-clock "08:15" 1 '(:minute -10)) "08:10"))
  (should (equal (inc-clock "08:15:00" 1 '(:second  30)) "08:15:30"))
  (should (equal (inc-clock "08:15:00" 1 '(:second  60)) "08:16:00"))
  (should (equal (inc-clock "08:15:00" 2 '(:second  30)) "08:16:00"))
  (should (equal (inc-clock "08:15:00" 1 '(:second -30)) "08:14:30")))

(ert-deftest test-inc-number ()
  "Test of `inc-number'"
  (should (equal (inc-number 2000 21 1) 2021))
  (should (equal (inc-number 2000 -21 1) 1979))
  (should (equal (inc-number 2000 3 2) 5000))
  (should (equal (inc-number 10 1 3) 100))
  (should (equal (inc-number 10 -1 3) 3)))

(provide 'test-mb-things)
